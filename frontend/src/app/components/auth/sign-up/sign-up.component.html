<!-- sign-up.component.html -->
<form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
  <h2>Create your account</h2>

  <div *ngIf="existsError" class="alert alert-warning">This email is already registered.</div>
  <div *ngIf="serverError" class="alert alert-danger">{{ serverError }}</div>

  <label>First name
    <input type="text" formControlName="firstName" />
  </label>
  <small class="error" *ngIf="f['firstName'].touched && f['firstName'].invalid">
    <span *ngIf="f['firstName'].errors?.['required']">First name is required.</span>
    <span *ngIf="f['firstName'].errors?.['minlength']">Min 2 characters.</span>
  </small>

  <label>Last name
    <input type="text" formControlName="lastName" />
  </label>

  <label>Email
    <input type="email" formControlName="email" />
  </label>
  <small class="error" *ngIf="f['email'].touched && f['email'].invalid">
    <span *ngIf="f['email'].errors?.['required']">Email is required.</span>
    <span *ngIf="f['email'].errors?.['email']">Please enter a valid email.</span>
  </small>

  <div [formGroup]="pGroup">
    <label>Password
      <input type="password" formControlName="password" />
    </label>
    <small class="error" *ngIf="pGroup.get('password')?.touched && pGroup.get('password')?.invalid">
      <span *ngIf="pGroup.get('password')?.errors?.['required']">Password is required.</span>
      <span *ngIf="pGroup.get('password')?.errors?.['minlength']">Min 6 characters.</span>
    </small>

    <label>Confirm password
      <input type="password" formControlName="confirm" />
    </label>
    <small class="error" *ngIf="pGroup.touched && pGroup.errors?.['mismatch']">
      Passwords do not match.
    </small>
  </div>

  <button type="submit" [disabled]="form.invalid || submitting">
    {{ submitting ? 'Creating...' : 'Create account' }}
  </button>

  <p class="muted">Already have an account? <a routerLink="/sign-in">Sign in</a></p>
</form>
